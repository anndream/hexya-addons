{{ define "web.assets_common" }}
    <script type="text/javascript" src="/web/static/lib/es5-shim/es5-shim.min.js"></script>
    <script type="text/javascript" src="/web/static/lib/underscore/underscore.js"></script>
    <script type="text/javascript" src="/web/static/lib/underscore.string/lib/underscore.string.js"></script>
    <script type="text/javascript" src="/web/static/lib/datejs/globalization/en-US.js"></script>
    <script type="text/javascript" src="/web/static/lib/spinjs/spin.js"></script>

    <!-- jQuery stuff -->
    <script type="text/javascript" src="/web/static/lib/jquery/jquery.js"></script>
    <script type="text/javascript" src="/web/static/lib/jquery.blockUI/jquery.blockUI.js"></script>
    <script type="text/javascript" src="/web/static/lib/jquery.hotkeys/jquery.hotkeys.js"></script>
    <script type="text/javascript" src="/web/static/lib/jquery.placeholder/jquery.placeholder.js"></script>
    <script type="text/javascript" src="/web/static/lib/jquery.timeago/jquery.timeago.js"></script>
    <script type="text/javascript" src="/web/static/lib/jquery.form/jquery.form.js"></script>

    <script type="text/javascript" src="/web/static/lib/jquery.ba-bbq/jquery.ba-bbq.js"></script>

    <script type="text/javascript" src="/web/static/lib/qweb/qweb2.js"></script>
    <script type="text/javascript" src="/web/static/src/js/openerpframework.js"></script>
    <script type="text/javascript" src="/web/static/src/js/tour.js"></script>

    <link rel="stylesheet" href="/web/static/lib/fontawesome/css/font-awesome.css"/>
{{ end }}

{{ define "jquery.ui.conflict" }}
    <!-- TODO: get rid of this hack once jQuery.ui is removed -->
    <script type="text/javascript" charset="utf-8">
        $.fn.bstooltip = $.fn.tooltip;
        $.fn.bsbutton = $.fn.button;
    </script>
    <script type="text/javascript" src="/web/static/lib/jquery.ui/js/jquery-ui-1.9.1.custom.js"></script>
    <script type="text/javascript" charset="utf-8">
        $.fn.tooltip = $.fn.bstooltip;
        $.fn.button = $.fn.bsbutton;
    </script>
{{ end }}

{{ define "web.assets_backend" }}
    <!-- Datejs -->
    <script type="text/javascript" src="/web/static/lib/datejs/core.js"></script>
    <script type="text/javascript" src="/web/static/lib/datejs/parser.js"></script>
    <script type="text/javascript" src="/web/static/lib/datejs/sugarpak.js"></script>
    <script type="text/javascript" src="/web/static/lib/datejs/extras.js"></script>

    <!-- jQuery addons -->
    <script type="text/javascript" src="/web/static/lib/jquery.validate/jquery.validate.js"></script>
    <script type="text/javascript" src="/web/static/lib/jquery.autosize/jquery.autosize.js"></script>
    <script type="text/javascript" src="/web/static/lib/jquery.scrollTo/jquery.scrollTo-min.js"></script>

    <link rel="stylesheet" href="/web/static/lib/cleditor/jquery.cleditor.css"/>
    <script type="text/javascript" src="/web/static/lib/cleditor/jquery.cleditor.js"></script>

    <link rel="stylesheet" href="/web/static/lib/jquery.textext/jquery.textext.css"/>
    <script type="text/javascript" src="/web/static/lib/jquery.textext/jquery.textext.js"></script>

    <link rel="stylesheet" href="/web/static/lib/select2/select2.css"/>
    <script type="text/javascript" src="/web/static/lib/select2/select2.js"></script>

    <link rel="stylesheet" href="/web/static/lib/bootstrap/css/bootstrap.css"/>
    <script type="text/javascript" src="/web/static/lib/bootstrap/js/bootstrap.js"></script>

    <!-- jQuery ui -->
    <link rel="stylesheet" href="/web/static/lib/jquery.ui.bootstrap/css/custom-theme/jquery-ui-1.9.0.custom.css"/>

    {{ template "jquery.ui.conflict" }}
    <link rel="stylesheet" href="/web/static/lib/jquery.ui.timepicker/css/jquery-ui-timepicker-addon.css"/>
    <script type="text/javascript" src="/web/static/lib/jquery.ui.timepicker/js/jquery-ui-timepicker-addon.js"></script>

    <link rel="stylesheet" href="/web/static/lib/jquery.ui.notify/css/ui.notify.css"/>
    <script type="text/javascript" src="/web/static/lib/jquery.ui.notify/js/jquery.notify.js"></script>

    <!-- Backbone -->
    <script type="text/javascript" src="/web/static/lib/backbone/backbone.js"></script>

    <!-- Internals -->
    <script type="text/javascript" charset="utf-8">
        openerp._modules = {{ .GetModulesOrder }};
    </script>
    <link rel="stylesheet" href="/web/static/src/css/base.css"/>
    <link rel="stylesheet" href="/web/static/src/css/data_export.css"/>
    <link rel="stylesheet" href="/base/static/src/css/modules.css"/>

    <script type="text/javascript" src="/web/static/lib/py.js/lib/py.js"></script>
    <script type="text/javascript" src="/web/static/src/js/boot.js"></script>
    <script type="text/javascript" src="/web/static/src/js/testing.js"></script>
    <script type="text/javascript" src="/web/static/src/js/pyeval.js"></script>
    <script type="text/javascript" src="/web/static/src/js/core.js"></script>
    <script type="text/javascript" src="/web/static/src/js/formats.js"></script>
    <script type="text/javascript" src="/web/static/src/js/chrome.js"></script>
    <script type="text/javascript" src="/web/static/src/js/views.js"></script>
    <script type="text/javascript" src="/web/static/src/js/data.js"></script>
    <script type="text/javascript" src="/web/static/src/js/data_export.js"></script>
    <script type="text/javascript" src="/web/static/src/js/search.js"></script>
    <script type="text/javascript" src="/web/static/src/js/view_list.js"></script>
    <script type="text/javascript" src="/web/static/src/js/view_form.js"></script>
    <script type="text/javascript" src="/web/static/src/js/view_list_editable.js"></script>
    <script type="text/javascript" src="/web/static/src/js/view_tree.js"></script>
    <script type="text/javascript" src="/base/static/src/js/apps.js"></script>
{{ end }}

{{ define "web.layout" }}
    <!DOCTYPE html>
        <html style="height: 100%">
        <head>
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
            <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
            <title>YEP</title>
            <link rel="shortcut icon" href="/web/static/src/img/favicon.ico" type="image/x-icon"/>
            <link rel="stylesheet" href="/web/static/src/css/full.css"/>
            {{ template "web.webclient_bootstrap.head" . }}
        </head>
        <body class="body_classname">
            {{ template "web.webclient_bootstrap.body" . }}
        </body>
    </html>
{{ end }}

{{ define "web.menu" }}
    <ul class="nav navbar-nav navbar-left oe_application_menu_placeholder">
        {{ range .Menus }}
        <li>
            {{ template "web.menu_link" .}}
        </li>
        {{ end }}
        <li id="menu_more_container" class="dropdown" style="display: none;">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
            <ul id="menu_more" class="dropdown-menu"></ul>
        </li>
    </ul>

    <ul class="nav navbar-nav navbar-right oe_user_menu_placeholder" style="display: none;"/>
    <ul class="nav navbar-nav navbar-right oe_systray" style="display: none;"/>
{{ end }}

{{ define "web.menu_link" }}
    <a href="{{ if .HasAction }}{{ printf `/web#menu_id=%s&action=%s` (.ID) (.Action.ID) }}{{ end }}"
        class="{{ if .HasChildren }}oe_menu_toggler{{ else }}oe_menu_leaf{{ end }}"
        data-menu="{{ .ID }}"
        action-model="{{ if .HasAction }}{{ .Action.Model }}{{ end }}"
        action-id="{{ if .HasAction }}{{ .Action.ID }}{{ end }}">
        <span class="oe_menu_text">
            {{ .Name }}
        </span>
    </a>
{{ end }}

{{ define "web.menu_secondary" }}
    <a class="oe_logo" href="/web">
        <span class="oe_logo_edit">Edit Company data</span>
        <img src='/web/binary/company_logo'/>
    </a>
    <div>
        <div>
            <div class="oe_secondary_menus_container">
                {{ range .Menus }}
                    <div style="display: none" class="oe_secondary_menu" menu-parent="{{ .ID }}">
                        {{ if .HasChildren }}
                            {{ range .Children.Menus }}
                                <div class="oe_secondary_menu_section">
                                    {{ .Name }}
                                </div>
                                {{ template "web.menu_secondary_submenu" .}}
                            {{ end }}
                        {{ end }}
                    </div>
                {{ end }}
            </div>
        </div>
    </div>
    <div class="oe_footer">
        Powered by <a href="http://github.com/npiganeau/yep" target="_blank"><span>YEP</span></a>
    </div>
{{ end }}

{{ define "web.menu_secondary_submenu" }}
    {{ if .HasChildren }}
        <ul class="oe_secondary_submenu nav nav-pills nav-stacked">
            {{ range .Children.Menus }}
                <li>
                    {{ template "web.menu_link" . }}
                    {{ template "web.menu_secondary_submenu" . }}
                </li>
            {{ end }}
        </ul>
    {{ end }}
{{ end }}

{{ define "web.webclient_bootstrap" }}
    {{ template "web.layout" . }}
{{ end }}

{{ define "web.webclient_bootstrap.head"}}
    {{ template "web.assets_common" . }}
    {{ template "web.assets_backend" . }}
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/web/static/src/css/ie.css"/> <![endif]-->
    <script type="text/javascript">
        $(function () {
    //        ifinit
            var s = new openerp.init();
            var wc = new s.web.WebClient();
            wc.setElement($(document.body));
            wc.start();
        });
    </script>
{{ end }}

{{ define "web.webclient_bootstrap.body" }}
    <nav id="oe_main_menu_navbar" class="navbar navbar-inverse" role="navigation">
         <!--groups="base.group_user,base.group_portal">-->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse" id="oe_main_menu_placeholder">
            {{ template "web.menu" .Menu }}
        </div>
    </nav>
    <div class="openerp openerp_webclient_container">
        <table class="oe_webclient">
            <tr>
                <td class="oe_leftbar" valign="top">
                    <div>
                        <!--groups="base.group_user,base.group_portal">-->
                        {{ template "web.menu_secondary" .Menu }}
                    </div>
                </td>
                <td class="oe_application"/>
            </tr>
        </table>
    </div>
{{ end }}
